## 工作流 流程设计要点v1.0

| 版本 | 作者    | 描述     |
| ---- | ------- | -------- |
| 1.0  | WudGaby | 初始文档 |
|      |         |          |



| 函数/变量                                                    | 描述                     | 示例                                                 |
| ------------------------------------------------------------ | ------------------------ | ---------------------------------------------------- |
| initiator                                                    | 发起人                   | ${initiator}                                         |
| boolean auditService.isApprove(execution)                    | 是否审核通过             | ${auditService.isApprove(execution)}                 |
| String empService.getDirector(String userId)                 | 获取该用户直接领导人     | ${empService.getDirector(initiator)}                 |
| String empService.getDirectorByLevel(String userId, int level) | 获取指定用户的几级领导人 | ${empService.getDirectorByLevel(initiator, 1)}       |
| String<br />empService.getRoleIdByRoleName(String roleName)  | 获取指定角色名称的角色id | ${empService.getRoleIdByRoleName("管理员")}          |
| List<br />getRoleIdsByRoleNames(String... roleNames);        | 获取指定角色名称的角色id | ${empService.getRoleIdByRoleName("管理员","审核员")} |
| List getEmployeesByUsername(String userName)                 | 获取指定用户名账号id     |                                                      |
| List getEmployeesByUsernames(String... userNames)            | 获取指定用户名账号id     | ${empService.getEmployeesByUsernames("张三","李四")} |
| String getEmployeeByAccount(String account);                 | 获取指定账号id           |                                                      |
| List getEmployeesByAccounts(String... accounts)              | 获取指定账号id           |                                                      |





**设计规则**

1.警情流程key **case_flow_global**

   处置单流程key  **dispose_flow_global**

1.开始时间 设置发起人initiator

2.第一个用户任务 设置自动跳过 ${submitter == ''}

3.排他网关 通过 流条件 ${auditService.isApprove(execution)}

  拒绝流 设置为默认流

